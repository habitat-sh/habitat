---
title: Process your build
---

# Run your service
The Habitat depot can contain multiple versions and releases of a given package. When you start a Habitat service, and depending on whether or not you specify a particular version number, Habitat will either pull the latest version, or the latest release for that particular version of the package.

A supervisor manages any application or service process within a Habitat service, so when a Habitat service starts up, the Supervisor executes a command on the application software through a run script that was either generated by Habitat when the package was built (through the `pkg_binaries_run` setting), or through a run hook like in the case of mytutorialapp.

Services can currently be run in two ways: You can either use the supervisor (`hab-sup`) directly, or you can export the package and run it in an external runtime format. Using the `hab-sup` directly allows you to rapidly install and test your services before uploading any packages into a depot, but exporting your package into a different runtime format provides flexibility in where your packages run.

For more information on how to natively run Habitat services or how to run services inside an external runtime format, see [Run packages](/docs/run-packages-overview).

To show the portability of Habitat, you will export and run a Habitat service from within a Docker container through the following steps:

1. If you are not in the studio environment, change over to your plan directory and enter the studio.

        cd ~/plans/mytutorialapp
        hab studio enter

    For Linux, run `sudo hab studio enter` instead.

    > Note: When you created an origin key pair in `hab setup`, you were also asked if you wanted to setup a default origin. If you said yes, then the `HAB_ORIGIN` environment variable is overridden for you with the default origin name you created. This action will also import the secret origin key that matches the overridden origin name when you call `hab studio enter`.

2. Build your mytutorialapp package.

        [1][default:/src:0]# build

3. Run `hab pkg export docker origin/packagename` with the origin and name of your package. These values are referenced in the pkg_origin and pkg_name settings of your plan, respectively.

        [2][default:/src:0]# hab pkg export docker myorigin/mytutorialapp

    Habitat will proceed to unpack and install all necessary Habitat packages, including a Habitat supervisor, the mytutorialapp package, and all of its runtime dependencies. Then it will create an image using the Docker scratch image as the base and build up the rest of the image from there.

4. Once that process has completed, exit out of the studio and run your Docker image inside a container or from any terminal window that has access to the Docker CLI on your host machine.

    > Note: We have to publish the Docker container port number to allow that container to be accessed by the host machine. Also, you may need to connect your shell to the Docker VM using `eval "$(docker-machine env default)"` if you are running Mac OS X.

       $ docker run -it -p 8080:8080 myorigin/mytutorialapp

    You should see the supervisor start your Node.js application.

        hab-sup(MN): Starting myorigin/mytutorialapp
        hab-sup(GS): Supervisor 172.17.0.3: 25734d74-6d9a-4a64-8019-836744a2c281
        hab-sup(GS): Census mytutorialapp.default: 9777a7bc-044a-4831-bd17-b4bd555f4de5
        hab-sup(GS): Starting inbound gossip listener
        hab-sup(GS): Starting outbound gossip distributor
        hab-sup(GS): Starting gossip failure detector
        hab-sup(CN): Starting census health adjuster
        hab-sup(SC): Updated config.json
        hab-sup(TP): Restarting because the service config was updated via the census
        mytutorialapp(SV): Starting
        mytutorialapp(O):
        mytutorialapp(O): > mytutorialapp@0.2.0 start /hab/svc/mytutorialapp
        mytutorialapp(O): > node server.js
        mytutorialapp(O):
        mytutorialapp(O): Running on http://0.0.0.0:8080

5. Because we are running this service in a Docker container, you need the IP address of the VM that is running it to access the message of the day. If your host machine is running Mac OS X, type the following command in your terminal window to bring up the site.

        open "http://$(docker-machine ip default):8080/"

    If you're running on Linux, you can simply open a browser and go to http://localhost:8080.

    Here's an example of what you should see in your browser:

    ![Screen shot of node.js tutorial output](/images/nodejs-tutorial-output.png)

6. You can also re-run your Docker container and update the message value when your Habitat service starts up. To do this, you must pass in a Docker environment variable with the following format: `HAB_PACKAGENAME='keyname1=newvalue1 keyname2=newvalue2 tablename1={keyname3=newvalue3}'`.

    > Note: The package name in the environment variable must be uppercase and any dashes must be replaced with underscores.

    Here is how you change the message for mytutorialapp:


       $ docker run -e HAB_MYTUTORIALAPP='message="Habitat rocks!"' -p 8080:8080 -it myorigin/mytutorialapp

    The output in the terminal window will be similar to the output shown in step 6.

    Now refresh, or connect again to the local URL through your web browser.

    ![Screen shot of node.js output with new message](/images/nodejs-tutorial-update-output.png)

Congratulations, you have successfully built a package from scratch, run it locally, and tested out some of the configuration capabilities!

<hr>
<ul class="main-content--button-nav">
  <li><a href="/tutorials/getting-started-next-steps" class="button cta">Next Steps</a></li>
  <li><a href="/tutorials/getting-started-configure-plan/">Back to previous step</a></li>
</ul>
